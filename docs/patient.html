<!DOCTYPE html>
<html lang ="en">

<head>
    <meta charset ="UTF-8">
    <meta http-equiv="X-US-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aggie Impact</title>

    <!--StyleSheet and Icon Reference-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/fontawesome.min.css">
    <link rel="stylesheet" href="./aggieimpact_design/css/patientStyle.css">
    <link rel="stylesheet" href="./aggieimpact_design/css/dataStyle.css">

    <!--JQuery Import-->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <!--Firebase Libraries-->
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script> 
    <script type="module" src="firebase.js"></script>
    <script id="FireBaseScript"></script>

    <!--Data Collection Functions-->
    <script src="data.js"></script>
    <script>
        function filterTable(){
            var input, filter, table, tr, td ,i, txtValue;
            input = document.getElementById('searchingFor');
            filter = input.value.toUpperCase();
            table = document.getElementById('patientTable');
            tr = table.getElementsByTagName('tr');
            for (i=0;i<tr.length;i++)
            {
                td = tr[i].getElementsByTagName('td')[0];
                if (td)
                {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1){
                        tr[i].style.display="";
                    }
                    else{
                        tr[i].style.display="none";
                    }
                }
            }
        }
    </script>
</head>

<body onload="Initialize();">
    <section id="menu">
        <div class="logo">
            <img src="aggieimpact_design/images/BRAIN_Lab_Icon.png" alt="">
        </div>
        <div class="MenuItems">
            <li>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#FFFFFF" d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/></svg>
                <a id="signOut" href="#">Sign Out</a>
            </li>            
        </div>
    </section>

    <section id="interface">
        <div class ="navBar">
            <div class="Profile">
                <p style="margin-right: 15px; color: white;">Welcome, User!</p>
                <img src="aggieimpact_design/images/avatar.jpg" alt="">
            </div>
        </div>
        <div class="syncButton">
            <img src="./aggieimpact_design/images/search-interface-symbol.png" 
                style="width: 4%; margin-left: 1%; margin-right: 1%;">
            <button class="firebase_button" id="firebaseBtn" type="button" style="width:90%">Search</button>
        </div>
            
        <div class="board">
            <table width="100%">
                <thead>
                    <tr>
                        <td> Patient Name </td>
                        <td> Birth Date </td>
                        <td> Patient Status </td>
                        <td> Choose Patient </td>
                    </tr>
                </thead>
                <tbody id = "patientTable"></tbody>
            </table>
        </div>

        <div class="data_collection" id="data_collection">
            <h2>Data Collection</h2>
            <button id="dataBtn" type="button">save data</button>
            <div class="board">
                <div class="tab">
                    <button class="tablink" onClick="switchtab(event,'Manual')">Manual Entry</button>
                    <button class="tablink" onClick="switchtab(event,'Bluetooth')" id="defaultOpen">Bluetooth</button>
                </div>

                <div id="Manual" class="tabcontent">
                    <form id="manual_entry">
                        <h2>Manual Entry </h2>
                        <h3>Right Hand Measurements</h3>
                        <label>Trial 1: </label>
                        <input class="manual_entry_form" placeholder="Enter Measurement" type="number" name="right_t1" min="1" max="1000">
                        <label>Trial 2: </label>
                        <input class="manual_entry_form" placeholder="Enter Measurement" type="number" name="right_t2" min="1" max="1000">
                        <label>Trial 3: </label>
                        <input class="manual_entry_form" placeholder="Enter Measurement" type="number" name="right_t3" min="1" max="1000">
                        
                        <h3>Left Hand Measurements</h3>
                        <label>Trial 1: </label>
                        <input class="manual_entry_form" placeholder="Enter Measurement" type="number" name="left_t1" min="1" max="1000">
                        <label>Trial 2: </label>
                        <input class="manual_entry_form" placeholder="Enter Measurement" type="number" name="left_t2" min="1" max="1000">
                        <label>Trial 3: </label>
                        <input class="manual_entry_form" placeholder="Enter Measurement" type="number" name="left_t3" min="1" max="1000">
                        <br>
                        <input class="manual_entry_form" type="submit" value="Submit">
                    </form>
                </div>

                <div id="Bluetooth" class="tabcontent">
                    <div id="ble_collection" class="ble_collection" >
                        <h2>Bluetooth Data Collection </h2>
                        <button id="ble_connect"> Connect Device </button>
                        <h3 id="ble_status"> Bluetooth Status... </h3>
                        <h3 id="sensor_status"> Sensor Status... </h3>
                        <button id ="collect_data" onclick="CollectData()">Collect Data</button>
                        <button id="ble_disconnect" onclick="DisconnectDevice()"> Disconnect </button>
                        <div id="error"></div>
                        <pre id="output"></pre>
                    </div>
                </div>
            </div>
        </div>

        
    </section>

    
    <script>
        $('#menu-btn').click(function(){
            $('#menu').toggleClass("active")
        })
    </script>
    <!--Tab Controller-->
    <script>     
        function switchtab(evt, TabName) {
            // Declare all variables
            var i, tabcontent, tablinks;

            // Get all elements with class="tabcontent" and hide them
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            // Get all elements with class="tablinks" and remove the class "active"
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(TabName).style.display = "block";
            evt.currentTarget.className += " active";
            }
    </script>

</body>

</html>
